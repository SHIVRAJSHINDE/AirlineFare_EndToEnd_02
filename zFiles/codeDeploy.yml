
Code Deploy:
    Create IAM user(so ec2 and communicate with ecr)
    Edit Launch template




-----------------------------------------------------------

#!/bin/bash

# Update the package list
sudo apt-get update -y

# Start and enable Docker
sudo systemctl start docker
sudo systemctl enable docker

# Authenticate Docker to the AWS ECR registry
aws ecr get-login-password --region ap-south-1 | docker login --username AWS --password-stdin 905418096737.dkr.ecr.ap-south-1.amazonaws.com

# Pull the latest Docker image from your ECR repository
docker pull 905418096737.dkr.ecr.ap-south-1.amazonaws.com/new_ecr:v1

# Stop and remove the old container (if any)
sudo docker stop new_ecr || true
sudo docker rm new_ecr || true

# Run the new Docker container
docker run -p 80:5000 -e DAGSHUB_PAT=c7739af80dc00d48cfbd465104124cf4ecd96802 --name new_ecr 905418096737.dkr.ecr.ap-south-1.amazonaws.com/new_ecr:v1

-------------------------------------------------------------
